{"ast":null,"code":"import _regeneratorRuntime from\"/home/finer_details/fullstackopen_erkkafiner/typescript/patientor_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/finer_details/fullstackopen_erkkafiner/typescript/patientor_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/finer_details/fullstackopen_erkkafiner/typescript/patientor_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{Box,Table,Button,TableHead,Typography,TableCell,TableRow,TableBody}from\"@mui/material\";import axios from\"axios\";import{Link}from\"react-router-dom\";import AddPatientModal from\"../AddPatientModal\";import HealthRatingBar from\"../HealthRatingBar\";import patientService from\"../../services/patients\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PatientListPage=function PatientListPage(_ref){var patients=_ref.patients,setPatients=_ref.setPatients;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalOpen=_useState2[0],setModalOpen=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var openModal=function openModal(){return setModalOpen(true);};var closeModal=function closeModal(){setModalOpen(false);setError(undefined);};var submitNewPatient=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var patient,_e$response,_e$response2,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return patientService.create(values);case 3:patient=_context.sent;setPatients(patients.concat(patient));setModalOpen(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(axios.isAxiosError(_context.t0)){if(_context.t0!==null&&_context.t0!==void 0&&(_e$response=_context.t0.response)!==null&&_e$response!==void 0&&_e$response.data&&typeof(_context.t0===null||_context.t0===void 0?void 0:(_e$response2=_context.t0.response)===null||_e$response2===void 0?void 0:_e$response2.data)===\"string\"){message=_context.t0.response.data.replace(\"Something went wrong. Error: \",\"\");console.error(message);setError(message);}else{setError(\"Unrecognized axios error\");}}else{console.error(\"Unknown error\",_context.t0);setError(\"Unknown error\");}case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function submitNewPatient(_x){return _ref2.apply(this,arguments);};}();var handlePatientClick=function handlePatientClick(){};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Typography,{align:\"center\",variant:\"h6\",children:\"Patient list\"})}),/*#__PURE__*/_jsxs(Table,{style:{marginBottom:\"1em\"},children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Gender\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Occupation\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Health Rating\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:Object.values(patients).map(function(patient){return/*#__PURE__*/_jsx(Link,{to:\"/patients/\".concat(patient.id),children:/*#__PURE__*/_jsxs(TableRow,{onClick:handlePatientClick,children:[/*#__PURE__*/_jsx(TableCell,{children:patient.name}),/*#__PURE__*/_jsx(TableCell,{children:patient.gender}),/*#__PURE__*/_jsx(TableCell,{children:patient.occupation}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(HealthRatingBar,{showText:false,rating:1})})]},patient.id)});})})]}),/*#__PURE__*/_jsx(AddPatientModal,{modalOpen:modalOpen,onSubmit:submitNewPatient,error:error,onClose:closeModal}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){return openModal();},children:\"Add New Patient\"})]});};export default PatientListPage;","map":{"version":3,"names":["useState","Box","Table","Button","TableHead","Typography","TableCell","TableRow","TableBody","axios","Link","AddPatientModal","HealthRatingBar","patientService","PatientListPage","patients","setPatients","modalOpen","setModalOpen","error","setError","openModal","closeModal","undefined","submitNewPatient","values","create","patient","concat","isAxiosError","response","data","message","replace","console","handlePatientClick","marginBottom","Object","map","id","name","gender","occupation"],"sources":["/home/finer_details/fullstackopen_erkkafiner/typescript/patientor_front/src/components/PatientListPage/index.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport {\n\tBox,\n\tTable,\n\tButton,\n\tTableHead,\n\tTypography,\n\tTableCell,\n\tTableRow,\n\tTableBody,\n} from \"@mui/material\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nimport { PatientFormValues, Patient } from \"../../types\";\nimport AddPatientModal from \"../AddPatientModal\";\n\nimport HealthRatingBar from \"../HealthRatingBar\";\n\nimport patientService from \"../../services/patients\";\n\ninterface Props {\n\tpatients: Patient[];\n\tsetPatients: React.Dispatch<React.SetStateAction<Patient[]>>;\n}\n\nconst PatientListPage = ({ patients, setPatients }: Props) => {\n\tconst [modalOpen, setModalOpen] = useState<boolean>(false);\n\tconst [error, setError] = useState<string>();\n\n\tconst openModal = (): void => setModalOpen(true);\n\n\tconst closeModal = (): void => {\n\t\tsetModalOpen(false);\n\t\tsetError(undefined);\n\t};\n\n\tconst submitNewPatient = async (values: PatientFormValues) => {\n\t\ttry {\n\t\t\tconst patient = await patientService.create(values);\n\t\t\tsetPatients(patients.concat(patient));\n\t\t\tsetModalOpen(false);\n\t\t} catch (e: unknown) {\n\t\t\tif (axios.isAxiosError(e)) {\n\t\t\t\tif (e?.response?.data && typeof e?.response?.data === \"string\") {\n\t\t\t\t\tconst message = e.response.data.replace(\n\t\t\t\t\t\t\"Something went wrong. Error: \",\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t);\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t\tsetError(message);\n\t\t\t\t} else {\n\t\t\t\t\tsetError(\"Unrecognized axios error\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Unknown error\", e);\n\t\t\t\tsetError(\"Unknown error\");\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handlePatientClick = () => {};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Box>\n\t\t\t\t<Typography align=\"center\" variant=\"h6\">\n\t\t\t\t\tPatient list\n\t\t\t\t</Typography>\n\t\t\t</Box>\n\t\t\t<Table style={{ marginBottom: \"1em\" }}>\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Name</TableCell>\n\t\t\t\t\t\t<TableCell>Gender</TableCell>\n\t\t\t\t\t\t<TableCell>Occupation</TableCell>\n\t\t\t\t\t\t<TableCell>Health Rating</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{Object.values(patients).map((patient: Patient) => (\n\t\t\t\t\t\t<Link to={`/patients/${patient.id}`}>\n\t\t\t\t\t\t\t<TableRow key={patient.id} onClick={handlePatientClick}>\n\t\t\t\t\t\t\t\t<TableCell>{patient.name}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>{patient.gender}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>{patient.occupation}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t<HealthRatingBar showText={false} rating={1} />\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t))}\n\t\t\t\t</TableBody>\n\t\t\t</Table>\n\t\t\t<AddPatientModal\n\t\t\t\tmodalOpen={modalOpen}\n\t\t\t\tonSubmit={submitNewPatient}\n\t\t\t\terror={error}\n\t\t\t\tonClose={closeModal}\n\t\t\t/>\n\t\t\t<Button variant=\"contained\" onClick={() => openModal()}>\n\t\t\t\tAdd New Patient\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\nexport default PatientListPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}