{"ast":null,"code":"import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{Box,Table,Button,TableHead,Typography,TableCell,TableRow,TableBody}from\"@mui/material\";import axios from\"axios\";import AddPatientModal from\"../AddPatientModal\";import HealthRatingBar from\"../HealthRatingBar\";import patientService from\"../../services/patients\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PatientListPage=_ref=>{let{patients,setPatients}=_ref;const[modalOpen,setModalOpen]=useState(false);const[error,setError]=useState();const navigate=useNavigate();const openModal=()=>setModalOpen(true);const closeModal=()=>{setModalOpen(false);setError(undefined);};const submitNewPatient=async values=>{try{const patient=await patientService.create(values);setPatients(patients.concat(patient));setModalOpen(false);}catch(e){if(axios.isAxiosError(e)){var _e$response,_e$response2;if(e!==null&&e!==void 0&&(_e$response=e.response)!==null&&_e$response!==void 0&&_e$response.data&&typeof(e===null||e===void 0?void 0:(_e$response2=e.response)===null||_e$response2===void 0?void 0:_e$response2.data)===\"string\"){const message=e.response.data.replace(\"Something went wrong. Error: \",\"\");console.error(message);setError(message);}else{setError(\"Unrecognized axios error\");}}else{console.error(\"Unknown error\",e);setError(\"Unknown error\");}}};const handlePatientClick=id=>{navigate(\"/patients/\".concat(id));patientService.getOne(id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Typography,{align:\"center\",variant:\"h6\",children:\"Patient list\"})}),/*#__PURE__*/_jsxs(Table,{style:{marginBottom:\"1em\"},children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Gender\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Occupation\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Health Rating\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:Object.values(patients).map(patient=>/*#__PURE__*/_jsxs(TableRow,{style:{cursor:'pointer'},onClick:e=>handlePatientClick(patient.id),children:[/*#__PURE__*/_jsx(TableCell,{children:patient.name}),/*#__PURE__*/_jsx(TableCell,{children:patient.gender}),/*#__PURE__*/_jsx(TableCell,{children:patient.occupation}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(HealthRatingBar,{showText:false,rating:1})})]},patient.id))})]}),/*#__PURE__*/_jsx(AddPatientModal,{modalOpen:modalOpen,onSubmit:submitNewPatient,error:error,onClose:closeModal}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>openModal(),children:\"Add New Patient\"})]});};export default PatientListPage;","map":{"version":3,"names":["useState","useNavigate","Box","Table","Button","TableHead","Typography","TableCell","TableRow","TableBody","axios","AddPatientModal","HealthRatingBar","patientService","PatientListPage","patients","setPatients","modalOpen","setModalOpen","error","setError","navigate","openModal","closeModal","undefined","submitNewPatient","values","patient","create","concat","e","isAxiosError","response","data","message","replace","console","handlePatientClick","id","getOne","marginBottom","Object","map","cursor","name","gender","occupation"],"sources":["/home/finer_details/fullstackopen_erkkafiner/typescript/patientor_front/src/components/PatientListPage/index.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n\tBox,\n\tTable,\n\tButton,\n\tTableHead,\n\tTypography,\n\tTableCell,\n\tTableRow,\n\tTableBody,\n} from \"@mui/material\";\nimport axios from \"axios\";\n\nimport { PatientFormValues, Patient } from \"../../types\";\nimport AddPatientModal from \"../AddPatientModal\";\n\nimport HealthRatingBar from \"../HealthRatingBar\";\n\nimport patientService from \"../../services/patients\";\n\ninterface Props {\n\tpatients: Patient[];\n\tsetPatients: React.Dispatch<React.SetStateAction<Patient[]>>;\n}\n\nconst PatientListPage = ({ patients, setPatients }: Props) => {\n\tconst [modalOpen, setModalOpen] = useState<boolean>(false);\n\tconst [error, setError] = useState<string>();\n\n\tconst navigate = useNavigate();\n\n\tconst openModal = (): void => setModalOpen(true);\n\n\tconst closeModal = (): void => {\n\t\tsetModalOpen(false);\n\t\tsetError(undefined);\n\t};\n\n\tconst submitNewPatient = async (values: PatientFormValues) => {\n\t\ttry {\n\t\t\tconst patient = await patientService.create(values);\n\t\t\tsetPatients(patients.concat(patient));\n\t\t\tsetModalOpen(false);\n\t\t} catch (e: unknown) {\n\t\t\tif (axios.isAxiosError(e)) {\n\t\t\t\tif (e?.response?.data && typeof e?.response?.data === \"string\") {\n\t\t\t\t\tconst message = e.response.data.replace(\n\t\t\t\t\t\t\"Something went wrong. Error: \",\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t);\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t\tsetError(message);\n\t\t\t\t} else {\n\t\t\t\t\tsetError(\"Unrecognized axios error\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Unknown error\", e);\n\t\t\t\tsetError(\"Unknown error\");\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handlePatientClick = (id: string) => {\n\t\tnavigate(`/patients/${id}`);\n\t\tpatientService.getOne(id)\n\t};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Box>\n\t\t\t\t<Typography align=\"center\" variant=\"h6\">\n\t\t\t\t\tPatient list\n\t\t\t\t</Typography>\n\t\t\t</Box>\n\t\t\t<Table style={{ marginBottom: \"1em\" }}>\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Name</TableCell>\n\t\t\t\t\t\t<TableCell>Gender</TableCell>\n\t\t\t\t\t\t<TableCell>Occupation</TableCell>\n\t\t\t\t\t\t<TableCell>Health Rating</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{Object.values(patients).map((patient: Patient) => (\n\t\t\t\t\t\t<TableRow style={{cursor: 'pointer'}} key={patient.id} onClick={(e)=> handlePatientClick(patient.id)}>\n\t\t\t\t\t\t\t\t<TableCell>{patient.name}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>{patient.gender}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>{patient.occupation}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t<HealthRatingBar showText={false} rating={1} />\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t))}\n\t\t\t\t</TableBody>\n\t\t\t</Table>\n\t\t\t<AddPatientModal\n\t\t\t\tmodalOpen={modalOpen}\n\t\t\t\tonSubmit={submitNewPatient}\n\t\t\t\terror={error}\n\t\t\t\tonClose={closeModal}\n\t\t\t/>\n\t\t\t<Button variant=\"contained\" onClick={() => openModal()}>\n\t\t\t\tAdd New Patient\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\nexport default PatientListPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}