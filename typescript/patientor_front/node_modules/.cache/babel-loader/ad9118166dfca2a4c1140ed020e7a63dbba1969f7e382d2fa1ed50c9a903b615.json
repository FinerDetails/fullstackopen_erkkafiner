{"ast":null,"code":"import{useState}from\"react\";import{Box,Table,Button,TableHead,Typography,TableCell,TableRow,TableBody}from\"@mui/material\";import axios from\"axios\";import{Link}from\"react-router-dom\";import AddPatientModal from\"../AddPatientModal\";import HealthRatingBar from\"../HealthRatingBar\";import patientService from\"../../services/patients\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PatientListPage=_ref=>{let{patients,setPatients}=_ref;const[modalOpen,setModalOpen]=useState(false);const[error,setError]=useState();const openModal=()=>setModalOpen(true);const closeModal=()=>{setModalOpen(false);setError(undefined);};const submitNewPatient=async values=>{try{const patient=await patientService.create(values);setPatients(patients.concat(patient));setModalOpen(false);}catch(e){if(axios.isAxiosError(e)){var _e$response,_e$response2;if(e!==null&&e!==void 0&&(_e$response=e.response)!==null&&_e$response!==void 0&&_e$response.data&&typeof(e===null||e===void 0?void 0:(_e$response2=e.response)===null||_e$response2===void 0?void 0:_e$response2.data)===\"string\"){const message=e.response.data.replace(\"Something went wrong. Error: \",\"\");console.error(message);setError(message);}else{setError(\"Unrecognized axios error\");}}else{console.error(\"Unknown error\",e);setError(\"Unknown error\");}}};const handlePatientClick=()=>{};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Typography,{align:\"center\",variant:\"h6\",children:\"Patient list\"})}),/*#__PURE__*/_jsxs(Table,{style:{marginBottom:\"1em\"},children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Gender\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Occupation\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Health Rating\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:Object.values(patients).map(patient=>/*#__PURE__*/_jsx(Link,{to:\"/patients/\".concat(patient.id),children:/*#__PURE__*/_jsxs(TableRow,{onClick:handlePatientClick,children:[/*#__PURE__*/_jsx(TableCell,{children:patient.name}),/*#__PURE__*/_jsx(TableCell,{children:patient.gender}),/*#__PURE__*/_jsx(TableCell,{children:patient.occupation}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(HealthRatingBar,{showText:false,rating:1})})]},patient.id)}))})]}),/*#__PURE__*/_jsx(AddPatientModal,{modalOpen:modalOpen,onSubmit:submitNewPatient,error:error,onClose:closeModal}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>openModal(),children:\"Add New Patient\"})]});};export default PatientListPage;","map":{"version":3,"names":["useState","Box","Table","Button","TableHead","Typography","TableCell","TableRow","TableBody","axios","Link","AddPatientModal","HealthRatingBar","patientService","PatientListPage","patients","setPatients","modalOpen","setModalOpen","error","setError","openModal","closeModal","undefined","submitNewPatient","values","patient","create","concat","e","isAxiosError","response","data","message","replace","console","handlePatientClick","marginBottom","Object","map","id","name","gender","occupation"],"sources":["/home/finer_details/fullstackopen_erkkafiner/typescript/patientor_front/src/components/PatientListPage/index.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport {\n\tBox,\n\tTable,\n\tButton,\n\tTableHead,\n\tTypography,\n\tTableCell,\n\tTableRow,\n\tTableBody,\n} from \"@mui/material\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nimport { PatientFormValues, Patient } from \"../../types\";\nimport AddPatientModal from \"../AddPatientModal\";\n\nimport HealthRatingBar from \"../HealthRatingBar\";\n\nimport patientService from \"../../services/patients\";\n\ninterface Props {\n\tpatients: Patient[];\n\tsetPatients: React.Dispatch<React.SetStateAction<Patient[]>>;\n}\n\nconst PatientListPage = ({ patients, setPatients }: Props) => {\n\tconst [modalOpen, setModalOpen] = useState<boolean>(false);\n\tconst [error, setError] = useState<string>();\n\n\tconst openModal = (): void => setModalOpen(true);\n\n\tconst closeModal = (): void => {\n\t\tsetModalOpen(false);\n\t\tsetError(undefined);\n\t};\n\n\tconst submitNewPatient = async (values: PatientFormValues) => {\n\t\ttry {\n\t\t\tconst patient = await patientService.create(values);\n\t\t\tsetPatients(patients.concat(patient));\n\t\t\tsetModalOpen(false);\n\t\t} catch (e: unknown) {\n\t\t\tif (axios.isAxiosError(e)) {\n\t\t\t\tif (e?.response?.data && typeof e?.response?.data === \"string\") {\n\t\t\t\t\tconst message = e.response.data.replace(\n\t\t\t\t\t\t\"Something went wrong. Error: \",\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t);\n\t\t\t\t\tconsole.error(message);\n\t\t\t\t\tsetError(message);\n\t\t\t\t} else {\n\t\t\t\t\tsetError(\"Unrecognized axios error\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Unknown error\", e);\n\t\t\t\tsetError(\"Unknown error\");\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handlePatientClick = () => {};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Box>\n\t\t\t\t<Typography align=\"center\" variant=\"h6\">\n\t\t\t\t\tPatient list\n\t\t\t\t</Typography>\n\t\t\t</Box>\n\t\t\t<Table style={{ marginBottom: \"1em\" }}>\n\t\t\t\t<TableHead>\n\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t<TableCell>Name</TableCell>\n\t\t\t\t\t\t<TableCell>Gender</TableCell>\n\t\t\t\t\t\t<TableCell>Occupation</TableCell>\n\t\t\t\t\t\t<TableCell>Health Rating</TableCell>\n\t\t\t\t\t</TableRow>\n\t\t\t\t</TableHead>\n\t\t\t\t<TableBody>\n\t\t\t\t\t{Object.values(patients).map((patient: Patient) => (\n\t\t\t\t\t\t<Link to={`/patients/${patient.id}`}>\n\t\t\t\t\t\t\t<TableRow key={patient.id} onClick={handlePatientClick}>\n\t\t\t\t\t\t\t\t<TableCell>{patient.name}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>{patient.gender}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>{patient.occupation}</TableCell>\n\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t<HealthRatingBar showText={false} rating={1} />\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t))}\n\t\t\t\t</TableBody>\n\t\t\t</Table>\n\t\t\t<AddPatientModal\n\t\t\t\tmodalOpen={modalOpen}\n\t\t\t\tonSubmit={submitNewPatient}\n\t\t\t\terror={error}\n\t\t\t\tonClose={closeModal}\n\t\t\t/>\n\t\t\t<Button variant=\"contained\" onClick={() => openModal()}>\n\t\t\t\tAdd New Patient\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\nexport default PatientListPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}